<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Residuals, Assumptions, and Transformations</title>

<script src="site_libs/header-attrs-2.9/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">STAT 155</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Lessons
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01_univariate.html">Plotting data - univariate</a>
    </li>
    <li>
      <a href="02_multivariate.html">Plotting data - multivariate</a>
    </li>
    <li>
      <a href="03_slr_creating_interpreting_point_pred.html">Simple linear regression</a>
    </li>
    <li>
      <a href="04_mlr_creating_interpreting_point_pred.html">Multiple linear regression</a>
    </li>
    <li>
      <a href="05_model_fitting_eval.html">Model evaluation</a>
    </li>
    <li>
      <a href="06_assumptions_transformations.html">Model assumptions &amp; transformations</a>
    </li>
    <li>
      <a href="07_logistic_regression.html">Logistic regression</a>
    </li>
    <li>
      <a href="08_sampling_reeses.html">Sampling variation with Reese's</a>
    </li>
    <li>
      <a href="09_sampling_variation_models.html">Sampling variation in models</a>
    </li>
    <li>
      <a href="10_confidence_intervals.html">Confidence intervals</a>
    </li>
    <li>
      <a href="11_hypothesis_tests.html">Hypothesis tests</a>
    </li>
    <li>
      <a href="12_hypothesis_testing_anova.html">Hypothesis tests - ANOVA</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Residuals, Assumptions, and Transformations</h1>

</div>


<pre class="r"><code>library(alr4) #NEW! For data. Let me know if you have issues installing this one)
library(GGally) #New ... maybe? For pairwise plots
library(tidyverse) #for plotting and summarizing
library(moderndive) #for nice model output
library(broom) #for nice model output 
library(gridExtra) #for nicely organizing plots
library(openintro) #for data
theme_set(theme_minimal()) #changes the theme of ggplots to theme_minimal, my personal favorite</code></pre>
<div class="alert alert-success">
<p><strong>GOAL:</strong></p>
<p>By the end of these notes and activities, you should be able to perform the following tasks.</p>
<ul>
<li>Check for non-constant variance and linearity using a residuals versus fitted values plot.<br />
</li>
<li>Check for normality by looking at a histogram of the residuals.<br />
</li>
<li>Know when to add a polynomial term to a model and implement it.<br />
</li>
<li>Know a few key scenarios when log-transforming the response variable and/or predictor variables could help satisfy model assumptions.<br />
</li>
<li>Interpret model coefficients with a log-transformed response variable.</li>
</ul>
</div>
<div id="review-models-we-have-explored-so-far---quantitative-response-variable" class="section level1">
<h1>REVIEW: Models we have explored so far - quantitative response variable</h1>
<ol start="0" style="list-style-type: decimal">
<li><p>No explanatory variables. Every predicted value is the average response.</p></li>
<li><p>One quantitative explanatory variable.</p></li>
</ol>
<ul>
<li>Intercept is the average response when explanatory variable is zero.<br />
</li>
<li>Coefficient of explanatory variable is the average change in the response for a one unit change in the explanatory variable.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>One categorical explanatory variable.</li>
</ol>
<ul>
<li>Intercept is the average response when explanatory variable is zero.<br />
</li>
<li>Coefficient of an indicator variable is the difference in average response between the level of the indicator variable and the baseline/reference level.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>More than one explanatory variable.</li>
</ol>
<ul>
<li>Interpretations much the same as above, except when interpreting each variable, it is necessary to acknowledge that there are other variables in the model. So, adding something like, “With all other variables held fixed” or “Accounting for (name of other variable)”.</li>
<li>Models with only main effects imply that the effect of a variable on the response is the same, regardless of values of other variable(s) in the model. But, this effect is diffferent than if the other variables were not included in the model.</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li><p>Models with interaction effects. Interpretations change depending on what types of variables are in the model, but models with interaction effects allow the relationship between each explanatory variable involved in the interaction and the response variable to differ depending on the value of the other explanatory variable involved in the interaction.</p></li>
<li><p>(We haven’t actually discussed this, but we’re ready to!) Models with more than two variables. The most important piece is to always acknowledge the that you’ve accounted for other variables when interpreting specific coefficients.</p></li>
</ol>
</div>
<div id="residuals-model-assumptions" class="section level1">
<h1>Residuals &amp; Model Assumptions</h1>
<p>The residuals in linear models are assumed to follow some assumptions.</p>
<ol style="list-style-type: decimal">
<li>They should be normally distributed. (Normality)</li>
<li>They should have a mean of 0 consistently.(Mean zero/linearity)</li>
<li>They should have constant variance, meaning how spread out they are should not vary depending on something else. (Constant variance)</li>
<li>They should be independent.</li>
</ol>
<p>Violations of these assumptions can cause problems when we want to make inferences, which we’ll want to do very soon. We can check many of these assumptions by looking at a plot of the residuals vs. fitted values and a histogram of the residuals.</p>
<div id="example-assumptions-satisfied" class="section level2">
<h2>Example: assumptions satisfied</h2>
<p>Below I simulated some data to assure assumptions are met. Do not worry about the code.</p>
<pre class="r"><code>set.seed(10)
x &lt;- rnorm(500, mean = 400, sd = 200)
y &lt;- 100 + 4*x + rnorm(500, mean = 0, sd = 300)

simdat &lt;- data.frame(x, y)

ggplot(simdat) +
  geom_point(aes(x = x, y = y)) +
  theme_minimal()</code></pre>
<p><img src="06_assumptions_transformations_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Let’s fit a model and look at some helpful plots.</p>
<pre class="r"><code>sim_mod &lt;- lm(y ~ x, data=simdat)
tidy(sim_mod)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"140.310144","3":"28.52751033","4":"4.918415","5":"1.18710e-06"},{"1":"x","2":"3.924029","3":"0.06386835","4":"61.439330","5":"1.38932e-234"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>augment(sim_mod) %&gt;% 
  ggplot(aes(x=.fitted, y=.resid)) +
  geom_point() +
  geom_smooth(se = FALSE) +
  geom_hline(yintercept = 0, color = &quot;red&quot;)</code></pre>
<p><img src="06_assumptions_transformations_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>augment(sim_mod) %&gt;% 
  ggplot(aes(x=.resid)) +
  geom_histogram(bins = 30) </code></pre>
<p><img src="06_assumptions_transformations_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="alert alert-info">
<p><strong>YOUR TURN!</strong></p>
<ol style="list-style-type: decimal">
<li><p>In the first plot, we can assess if the residuals have constant variance and mean zero. How? What might the plot look like if they didn’t?<br />
</p></li>
<li><p>The second plot allows us to check the normality of the residuals. How? What might it look like if it weren’t normal?</p></li>
<li><p>It is difficult to check for independence. Can you think of any scenarios where our data might not be independent?<br />
</p></li>
</ol>
</div>
</div>
<div id="examples-assumptions-not-satisfied" class="section level2">
<h2>Examples: assumptions not satisfied</h2>
<div id="king-county-house-data" class="section level3">
<h3>King County house data</h3>
<p>Let’s try this with the King County house data. First, we read in the data and do some slight modifications.</p>
<pre class="r"><code>kc_house_data2 &lt;-
  house_prices %&gt;% 
  filter(bedrooms&lt;=5, bedrooms&gt;0) %&gt;% 
  mutate(grade_CAT = fct_relevel(ifelse(grade %in% &quot;1&quot;:&quot;7&quot;, &quot;Low&quot;,
                                        ifelse(grade == &quot;8&quot;, &quot;Medium&quot;,&quot;High&quot;)),
                                     &quot;Low&quot;, &quot;Medium&quot;, &quot;High&quot;),
         age=2015-yr_built)</code></pre>
<p>Next, fit the model <code>price ~ sqft_living15 + age</code>.</p>
<pre class="r"><code>kc_2var &lt;- lm(price ~ sqft_living15 + age, 
                   data=kc_house_data2)
tidy(kc_2var)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"-201230.271","3":"7792.923564","4":"-25.82218","5":"8.498672e-145"},{"1":"sqft_living15","2":"331.825","3":"3.006317","4":"110.37592","5":"0.000000e+00"},{"1":"age","2":"1797.882","3":"69.880976","4":"25.72778","5":"9.028006e-144"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Now, let’s look at a plot of residuals vs. fitted values and a histogram of the residuals.</p>
<pre class="r"><code>a1 &lt;- augment(kc_2var) %&gt;% 
  ggplot(aes(x=.fitted, y = .resid)) +
  geom_point(size = .5, alpha = .3) +
  geom_smooth(se=FALSE) +
  geom_hline(yintercept = 0, color = &quot;red&quot;) +
  scale_y_continuous(labels = scales::comma) +
  labs(x = &quot;Fitted Values&quot;, y = &quot;Residuals&quot;)

a2 &lt;- augment(kc_2var) %&gt;% 
  ggplot(aes(x=.resid)) +
  geom_histogram(bins=50) +
  scale_x_continuous(labels = scales::comma)

gridExtra::grid.arrange(a1, a2, nrow = 1)</code></pre>
<p><img src="06_assumptions_transformations_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<div class="alert alert-info">
<p><strong>YOUR TURN!</strong></p>
<p>What do you observe in these plots? Do any assumptions appear violated?</p>
</div>
</div>
<div id="walleye-data" class="section level3">
<h3>Walleye data</h3>
<p>Let’s look at another plot. This is a new dataset that has the age and length of walleye (a type of fish), from the <code>alr4</code> package.</p>
<pre class="r"><code>ggplot(walleye) + 
  geom_jitter(aes(x = age, y = length)) +
  theme_minimal()</code></pre>
<p><img src="06_assumptions_transformations_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<div class="alert alert-info">
<p><strong>YOUR TURN!</strong></p>
<ol style="list-style-type: decimal">
<li>Fit a model that uses <code>age</code> to explain <code>length</code>.</li>
<li>Look at the 2 residual plots we discussed and assess them.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="correcting-model-assumptions-with-transformations" class="section level1">
<h1>Correcting model assumptions with transformations</h1>
<p>There are many sophisticated methods that can be used to fix problems with linear model assumptions. But a fairly simple solution that often works well is to transform variables. We will discuss two different transformations and apply them to the two examples from above.</p>
<div id="logarithmic-transformation" class="section level2">
<h2>Logarithmic transformation</h2>
<p>When variables range across more than one order of magnitude in their values (ie. they have values in the 1,000’s AND 10,000’s or 100,000’s AND the 1,000,000’s), log transforming can often help fix non-constant variance. Let’s look at the following scatterplot matrix. I did a log base 2 transformation of both <em>price</em> and <em>sqft_living15</em>. What do you notice?</p>
<pre class="r"><code>kc_house_data2 %&gt;% 
  mutate(log2_price = log2(price),
         log2_sqft = log2(sqft_living15)) %&gt;% 
  select(age, sqft_living15, log2_sqft, log2_price) %&gt;% 
  ggpairs()</code></pre>
<p><img src="06_assumptions_transformations_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Now, let’s fit a model that uses <em>log2_price</em> as the response and <em>age</em> and <em>log2_sqft</em> as explanatory variables. First, I need to create a new dataset with these variables.</p>
<pre class="r"><code>kc_house_log &lt;- kc_house_data2 %&gt;% 
  mutate(log2_price = log2(price),
         log2_sqft = log2(sqft_living15))
kc_log &lt;- lm(log2_price ~ age + log2_sqft,
             data = kc_house_log)
get_regression_table(kc_log)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std_error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p_value"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["lower_ci"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["upper_ci"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"intercept","2":"7.339","3":"0.102","4":"71.948","5":"0","6":"7.139","7":"7.539"},{"1":"age","2":"0.003","3":"0.000","4":"23.326","5":"0","6":"0.003","7":"0.004"},{"1":"log2_sqft","2":"1.042","3":"0.009","4":"113.770","5":"0","6":"1.024","7":"1.060"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="alert alert-info">
<p><strong>YOUR TURN!</strong></p>
<p>Use the residual plots to check the model assumptions. How do they look now?</p>
</div>
</div>
<div id="adding-a-polynomial-term-to-the-model" class="section level2">
<h2>Adding a polynomial term to the model</h2>
<p>For the walleye data, the biggest problem seemed to be that the mean was not zero throughout the range of fitted values. This is because the relationship between <code>age</code> and <code>length</code> was not linear to begin with.</p>
<p>We can try to address this by adding a quadratic (or higher order polynomial) term to our model. I have done that below. Notice that you need to enclose the polynomial term in <code>I()</code>.</p>
<pre class="r"><code>walleye_quadratic &lt;-  lm(length ~ age + I(age^2), 
                         data=walleye)
tidy(walleye_quadratic)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"154.579805","3":"1.43101177","4":"108.02134","5":"0.000000e+00"},{"1":"age","2":"55.282016","3":"0.70158158","4":"78.79628","5":"0.000000e+00"},{"1":"I(age^2)","2":"-2.720418","3":"0.07110239","4":"-38.26056","5":"5.183383e-264"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="alert alert-info">
<p><strong>YOUR TURN!</strong></p>
<ol style="list-style-type: decimal">
<li>Plot this model on the scatterplot of <code>age</code> versus <code>length</code>.</li>
<li>Create the two residual plots and evaluate them.</li>
<li>Try interpreting the coefficients of the model.</li>
</ol>
</div>
</div>
<div id="interpreting-a-model-after-transforming-variables" class="section level2">
<h2>Interpreting a model after transforming variables</h2>
<p>Interpretation can get a bit tricky after transforming variables. We usually still prefer to interpret the model in the original units. When doing log transformations, it will be helpful to remember some rules of logs of exponents (see the help sheet on the moodle page). Below you will work through an example using the following model.</p>
<pre class="r"><code>tidy(kc_log)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"7.33869564","3":"0.101999579","4":"71.94829","5":"0.000000e+00"},{"1":"age","2":"0.00343293","3":"0.000147169","4":"23.32645","5":"7.419722e-119"},{"1":"log2_sqft","2":"1.04158573","3":"0.009155156","4":"113.77039","5":"0.000000e+00"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="alert alert-info">
<p><strong>YOUR TURN!</strong></p>
<ol style="list-style-type: decimal">
<li><p>Write down the model equation in terms of <code>price</code>. That is, rather than having <code>log2_price</code> on the left hand side of the equation, <code>price</code> is on the left hand side.</p></li>
<li><p>Using the equation from the previous step, how does an increase of 1 year in age of a home typically affect the price (with all other variables in the model held fixed)? It might be helpful to try an example.</p></li>
<li><p>How does doubling square footage typically affect the price (with all other variables in the model held fixed)? There is a reason I’m asking this question in this way …</p></li>
<li><p>Now build a more complex model with <em>log2_price</em> as the response. Add a categorical variable and/or interaction effect. How do you interpret the coefficients of a categorical variable? An interaction effect?</p></li>
</ol>
</div>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiUmVzaWR1YWxzLCBBc3N1bXB0aW9ucywgYW5kIFRyYW5zZm9ybWF0aW9ucyIKb3V0cHV0OiAgCiAgaHRtbF9kb2N1bWVudDoKICAgIHRvYzogdHJ1ZQogICAgdG9jX2Zsb2F0OiB0cnVlCiAgICBkZl9wcmludDogcGFnZWQKICAgIGNvZGVfZG93bmxvYWQ6IHRydWUKLS0tCgpgYGB7ciwgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRX0KbGlicmFyeShhbHI0KSAjTkVXISBGb3IgZGF0YS4gTGV0IG1lIGtub3cgaWYgeW91IGhhdmUgaXNzdWVzIGluc3RhbGxpbmcgdGhpcyBvbmUpCmxpYnJhcnkoR0dhbGx5KSAjTmV3IC4uLiBtYXliZT8gRm9yIHBhaXJ3aXNlIHBsb3RzCmxpYnJhcnkodGlkeXZlcnNlKSAjZm9yIHBsb3R0aW5nIGFuZCBzdW1tYXJpemluZwpsaWJyYXJ5KG1vZGVybmRpdmUpICNmb3IgbmljZSBtb2RlbCBvdXRwdXQKbGlicmFyeShicm9vbSkgI2ZvciBuaWNlIG1vZGVsIG91dHB1dCAKbGlicmFyeShncmlkRXh0cmEpICNmb3IgbmljZWx5IG9yZ2FuaXppbmcgcGxvdHMKbGlicmFyeShvcGVuaW50cm8pICNmb3IgZGF0YQp0aGVtZV9zZXQodGhlbWVfbWluaW1hbCgpKSAjY2hhbmdlcyB0aGUgdGhlbWUgb2YgZ2dwbG90cyB0byB0aGVtZV9taW5pbWFsLCBteSBwZXJzb25hbCBmYXZvcml0ZQpgYGAKCjo6OiB7LmFsZXJ0IC5hbGVydC1zdWNjZXNzfQo8c3Ryb25nPkdPQUw6PC9zdHJvbmc+CgpCeSB0aGUgZW5kIG9mIHRoZXNlIG5vdGVzIGFuZCBhY3Rpdml0aWVzLCB5b3Ugc2hvdWxkIGJlIGFibGUgdG8gcGVyZm9ybSB0aGUgZm9sbG93aW5nIHRhc2tzLgoKLSAgIENoZWNrIGZvciBub24tY29uc3RhbnQgdmFyaWFuY2UgYW5kIGxpbmVhcml0eSB1c2luZyBhIHJlc2lkdWFscyB2ZXJzdXMgZml0dGVkIHZhbHVlcyBwbG90LlwKLSAgIENoZWNrIGZvciBub3JtYWxpdHkgYnkgbG9va2luZyBhdCBhIGhpc3RvZ3JhbSBvZiB0aGUgcmVzaWR1YWxzLlwKLSAgIEtub3cgd2hlbiB0byBhZGQgYSBwb2x5bm9taWFsIHRlcm0gdG8gYSBtb2RlbCBhbmQgaW1wbGVtZW50IGl0LlwKLSAgIEtub3cgYSBmZXcga2V5IHNjZW5hcmlvcyB3aGVuIGxvZy10cmFuc2Zvcm1pbmcgdGhlIHJlc3BvbnNlIHZhcmlhYmxlIGFuZC9vciBwcmVkaWN0b3IgdmFyaWFibGVzIGNvdWxkIGhlbHAgc2F0aXNmeSBtb2RlbCBhc3N1bXB0aW9ucy5cCi0gICBJbnRlcnByZXQgbW9kZWwgY29lZmZpY2llbnRzIHdpdGggYSBsb2ctdHJhbnNmb3JtZWQgcmVzcG9uc2UgdmFyaWFibGUuCjo6OgoKIyBSRVZJRVc6IE1vZGVscyB3ZSBoYXZlIGV4cGxvcmVkIHNvIGZhciAtIHF1YW50aXRhdGl2ZSByZXNwb25zZSB2YXJpYWJsZQoKMC4gIE5vIGV4cGxhbmF0b3J5IHZhcmlhYmxlcy4gRXZlcnkgcHJlZGljdGVkIHZhbHVlIGlzIHRoZSBhdmVyYWdlIHJlc3BvbnNlLgoKMS4gIE9uZSBxdWFudGl0YXRpdmUgZXhwbGFuYXRvcnkgdmFyaWFibGUuCgotICAgSW50ZXJjZXB0IGlzIHRoZSBhdmVyYWdlIHJlc3BvbnNlIHdoZW4gZXhwbGFuYXRvcnkgdmFyaWFibGUgaXMgemVyby5cCi0gICBDb2VmZmljaWVudCBvZiBleHBsYW5hdG9yeSB2YXJpYWJsZSBpcyB0aGUgYXZlcmFnZSBjaGFuZ2UgaW4gdGhlIHJlc3BvbnNlIGZvciBhIG9uZSB1bml0IGNoYW5nZSBpbiB0aGUgZXhwbGFuYXRvcnkgdmFyaWFibGUuCgoyLiAgT25lIGNhdGVnb3JpY2FsIGV4cGxhbmF0b3J5IHZhcmlhYmxlLgoKLSAgIEludGVyY2VwdCBpcyB0aGUgYXZlcmFnZSByZXNwb25zZSB3aGVuIGV4cGxhbmF0b3J5IHZhcmlhYmxlIGlzIHplcm8uXAotICAgQ29lZmZpY2llbnQgb2YgYW4gaW5kaWNhdG9yIHZhcmlhYmxlIGlzIHRoZSBkaWZmZXJlbmNlIGluIGF2ZXJhZ2UgcmVzcG9uc2UgYmV0d2VlbiB0aGUgbGV2ZWwgb2YgdGhlIGluZGljYXRvciB2YXJpYWJsZSBhbmQgdGhlIGJhc2VsaW5lL3JlZmVyZW5jZSBsZXZlbC4KCjMuICBNb3JlIHRoYW4gb25lIGV4cGxhbmF0b3J5IHZhcmlhYmxlLgoKLSAgIEludGVycHJldGF0aW9ucyBtdWNoIHRoZSBzYW1lIGFzIGFib3ZlLCBleGNlcHQgd2hlbiBpbnRlcnByZXRpbmcgZWFjaCB2YXJpYWJsZSwgaXQgaXMgbmVjZXNzYXJ5IHRvIGFja25vd2xlZGdlIHRoYXQgdGhlcmUgYXJlIG90aGVyIHZhcmlhYmxlcyBpbiB0aGUgbW9kZWwuIFNvLCBhZGRpbmcgc29tZXRoaW5nIGxpa2UsICJXaXRoIGFsbCBvdGhlciB2YXJpYWJsZXMgaGVsZCBmaXhlZCIgb3IgIkFjY291bnRpbmcgZm9yIChuYW1lIG9mIG90aGVyIHZhcmlhYmxlKSIuCi0gICBNb2RlbHMgd2l0aCBvbmx5IG1haW4gZWZmZWN0cyBpbXBseSB0aGF0IHRoZSBlZmZlY3Qgb2YgYSB2YXJpYWJsZSBvbiB0aGUgcmVzcG9uc2UgaXMgdGhlIHNhbWUsIHJlZ2FyZGxlc3Mgb2YgdmFsdWVzIG9mIG90aGVyIHZhcmlhYmxlKHMpIGluIHRoZSBtb2RlbC4gQnV0LCB0aGlzIGVmZmVjdCBpcyBkaWZmZmVyZW50IHRoYW4gaWYgdGhlIG90aGVyIHZhcmlhYmxlcyB3ZXJlIG5vdCBpbmNsdWRlZCBpbiB0aGUgbW9kZWwuCgo0LiAgTW9kZWxzIHdpdGggaW50ZXJhY3Rpb24gZWZmZWN0cy4gSW50ZXJwcmV0YXRpb25zIGNoYW5nZSBkZXBlbmRpbmcgb24gd2hhdCB0eXBlcyBvZiB2YXJpYWJsZXMgYXJlIGluIHRoZSBtb2RlbCwgYnV0IG1vZGVscyB3aXRoIGludGVyYWN0aW9uIGVmZmVjdHMgYWxsb3cgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIGVhY2ggZXhwbGFuYXRvcnkgdmFyaWFibGUgaW52b2x2ZWQgaW4gdGhlIGludGVyYWN0aW9uIGFuZCB0aGUgcmVzcG9uc2UgdmFyaWFibGUgdG8gZGlmZmVyIGRlcGVuZGluZyBvbiB0aGUgdmFsdWUgb2YgdGhlIG90aGVyIGV4cGxhbmF0b3J5IHZhcmlhYmxlIGludm9sdmVkIGluIHRoZSBpbnRlcmFjdGlvbi4KCjUuICAoV2UgaGF2ZW4ndCBhY3R1YWxseSBkaXNjdXNzZWQgdGhpcywgYnV0IHdlJ3JlIHJlYWR5IHRvISkgTW9kZWxzIHdpdGggbW9yZSB0aGFuIHR3byB2YXJpYWJsZXMuIFRoZSBtb3N0IGltcG9ydGFudCBwaWVjZSBpcyB0byBhbHdheXMgYWNrbm93bGVkZ2UgdGhlIHRoYXQgeW91J3ZlIGFjY291bnRlZCBmb3Igb3RoZXIgdmFyaWFibGVzIHdoZW4gaW50ZXJwcmV0aW5nIHNwZWNpZmljIGNvZWZmaWNpZW50cy4KCiMgUmVzaWR1YWxzICYgTW9kZWwgQXNzdW1wdGlvbnMKClRoZSByZXNpZHVhbHMgaW4gbGluZWFyIG1vZGVscyBhcmUgYXNzdW1lZCB0byBmb2xsb3cgc29tZSBhc3N1bXB0aW9ucy4KCjEuICBUaGV5IHNob3VsZCBiZSBub3JtYWxseSBkaXN0cmlidXRlZC4gKE5vcm1hbGl0eSkKMi4gIFRoZXkgc2hvdWxkIGhhdmUgYSBtZWFuIG9mIDAgY29uc2lzdGVudGx5LihNZWFuIHplcm8vbGluZWFyaXR5KQozLiAgVGhleSBzaG91bGQgaGF2ZSBjb25zdGFudCB2YXJpYW5jZSwgbWVhbmluZyBob3cgc3ByZWFkIG91dCB0aGV5IGFyZSBzaG91bGQgbm90IHZhcnkgZGVwZW5kaW5nIG9uIHNvbWV0aGluZyBlbHNlLiAoQ29uc3RhbnQgdmFyaWFuY2UpCjQuICBUaGV5IHNob3VsZCBiZSBpbmRlcGVuZGVudC4KClZpb2xhdGlvbnMgb2YgdGhlc2UgYXNzdW1wdGlvbnMgY2FuIGNhdXNlIHByb2JsZW1zIHdoZW4gd2Ugd2FudCB0byBtYWtlIGluZmVyZW5jZXMsIHdoaWNoIHdlJ2xsIHdhbnQgdG8gZG8gdmVyeSBzb29uLiBXZSBjYW4gY2hlY2sgbWFueSBvZiB0aGVzZSBhc3N1bXB0aW9ucyBieSBsb29raW5nIGF0IGEgcGxvdCBvZiB0aGUgcmVzaWR1YWxzIHZzLiBmaXR0ZWQgdmFsdWVzIGFuZCBhIGhpc3RvZ3JhbSBvZiB0aGUgcmVzaWR1YWxzLgoKIyMgRXhhbXBsZTogYXNzdW1wdGlvbnMgc2F0aXNmaWVkCgpCZWxvdyBJIHNpbXVsYXRlZCBzb21lIGRhdGEgdG8gYXNzdXJlIGFzc3VtcHRpb25zIGFyZSBtZXQuIERvIG5vdCB3b3JyeSBhYm91dCB0aGUgY29kZS4KCmBgYHtyfQpzZXQuc2VlZCgxMCkKeCA8LSBybm9ybSg1MDAsIG1lYW4gPSA0MDAsIHNkID0gMjAwKQp5IDwtIDEwMCArIDQqeCArIHJub3JtKDUwMCwgbWVhbiA9IDAsIHNkID0gMzAwKQoKc2ltZGF0IDwtIGRhdGEuZnJhbWUoeCwgeSkKCmdncGxvdChzaW1kYXQpICsKICBnZW9tX3BvaW50KGFlcyh4ID0geCwgeSA9IHkpKSArCiAgdGhlbWVfbWluaW1hbCgpCmBgYAoKTGV0J3MgZml0IGEgbW9kZWwgYW5kIGxvb2sgYXQgc29tZSBoZWxwZnVsIHBsb3RzLgoKYGBge3J9CnNpbV9tb2QgPC0gbG0oeSB+IHgsIGRhdGE9c2ltZGF0KQp0aWR5KHNpbV9tb2QpCmBgYAoKYGBge3IsIG1lc3NhZ2U9RkFMU0V9CmF1Z21lbnQoc2ltX21vZCkgJT4lIAogIGdncGxvdChhZXMoeD0uZml0dGVkLCB5PS5yZXNpZCkpICsKICBnZW9tX3BvaW50KCkgKwogIGdlb21fc21vb3RoKHNlID0gRkFMU0UpICsKICBnZW9tX2hsaW5lKHlpbnRlcmNlcHQgPSAwLCBjb2xvciA9ICJyZWQiKQpgYGAKCmBgYHtyfQphdWdtZW50KHNpbV9tb2QpICU+JSAKICBnZ3Bsb3QoYWVzKHg9LnJlc2lkKSkgKwogIGdlb21faGlzdG9ncmFtKGJpbnMgPSAzMCkgCmBgYAoKOjo6IHsuYWxlcnQgLmFsZXJ0LWluZm99CjxzdHJvbmc+WU9VUiBUVVJOITwvc3Ryb25nPgoKMS4gIEluIHRoZSBmaXJzdCBwbG90LCB3ZSBjYW4gYXNzZXNzIGlmIHRoZSByZXNpZHVhbHMgaGF2ZSBjb25zdGFudCB2YXJpYW5jZSBhbmQgbWVhbiB6ZXJvLiBIb3c/IFdoYXQgbWlnaHQgdGhlIHBsb3QgbG9vayBsaWtlIGlmIHRoZXkgZGlkbid0P1wKCjIuICBUaGUgc2Vjb25kIHBsb3QgYWxsb3dzIHVzIHRvIGNoZWNrIHRoZSBub3JtYWxpdHkgb2YgdGhlIHJlc2lkdWFscy4gSG93PyBXaGF0IG1pZ2h0IGl0IGxvb2sgbGlrZSBpZiBpdCB3ZXJlbid0IG5vcm1hbD8KCjMuICBJdCBpcyBkaWZmaWN1bHQgdG8gY2hlY2sgZm9yIGluZGVwZW5kZW5jZS4gQ2FuIHlvdSB0aGluayBvZiBhbnkgc2NlbmFyaW9zIHdoZXJlIG91ciBkYXRhIG1pZ2h0IG5vdCBiZSBpbmRlcGVuZGVudD9cCjo6OgoKIyMgRXhhbXBsZXM6IGFzc3VtcHRpb25zIG5vdCBzYXRpc2ZpZWQKCiMjIyBLaW5nIENvdW50eSBob3VzZSBkYXRhCgpMZXQncyB0cnkgdGhpcyB3aXRoIHRoZSBLaW5nIENvdW50eSBob3VzZSBkYXRhLiBGaXJzdCwgd2UgcmVhZCBpbiB0aGUgZGF0YSBhbmQgZG8gc29tZSBzbGlnaHQgbW9kaWZpY2F0aW9ucy4KCmBgYHtyLCBtZXNzYWdlPUZBTFNFLCB3YXJuaW5nPUZBTFNFfQprY19ob3VzZV9kYXRhMiA8LQogIGhvdXNlX3ByaWNlcyAlPiUgCiAgZmlsdGVyKGJlZHJvb21zPD01LCBiZWRyb29tcz4wKSAlPiUgCiAgbXV0YXRlKGdyYWRlX0NBVCA9IGZjdF9yZWxldmVsKGlmZWxzZShncmFkZSAlaW4lICIxIjoiNyIsICJMb3ciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGdyYWRlID09ICI4IiwgIk1lZGl1bSIsIkhpZ2giKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTG93IiwgIk1lZGl1bSIsICJIaWdoIiksCiAgICAgICAgIGFnZT0yMDE1LXlyX2J1aWx0KQpgYGAKCk5leHQsIGZpdCB0aGUgbW9kZWwgYHByaWNlIH4gc3FmdF9saXZpbmcxNSArIGFnZWAuCgpgYGB7cn0Ka2NfMnZhciA8LSBsbShwcmljZSB+IHNxZnRfbGl2aW5nMTUgKyBhZ2UsIAogICAgICAgICAgICAgICAgICAgZGF0YT1rY19ob3VzZV9kYXRhMikKdGlkeShrY18ydmFyKQpgYGAKCk5vdywgbGV0J3MgbG9vayBhdCBhIHBsb3Qgb2YgcmVzaWR1YWxzIHZzLiBmaXR0ZWQgdmFsdWVzIGFuZCBhIGhpc3RvZ3JhbSBvZiB0aGUgcmVzaWR1YWxzLgoKYGBge3IsIG1lc3NhZ2U9RkFMU0UsIGZpZy5hc3A9LjN9CmExIDwtIGF1Z21lbnQoa2NfMnZhcikgJT4lIAogIGdncGxvdChhZXMoeD0uZml0dGVkLCB5ID0gLnJlc2lkKSkgKwogIGdlb21fcG9pbnQoc2l6ZSA9IC41LCBhbHBoYSA9IC4zKSArCiAgZ2VvbV9zbW9vdGgoc2U9RkFMU0UpICsKICBnZW9tX2hsaW5lKHlpbnRlcmNlcHQgPSAwLCBjb2xvciA9ICJyZWQiKSArCiAgc2NhbGVfeV9jb250aW51b3VzKGxhYmVscyA9IHNjYWxlczo6Y29tbWEpICsKICBsYWJzKHggPSAiRml0dGVkIFZhbHVlcyIsIHkgPSAiUmVzaWR1YWxzIikKCmEyIDwtIGF1Z21lbnQoa2NfMnZhcikgJT4lIAogIGdncGxvdChhZXMoeD0ucmVzaWQpKSArCiAgZ2VvbV9oaXN0b2dyYW0oYmlucz01MCkgKwogIHNjYWxlX3hfY29udGludW91cyhsYWJlbHMgPSBzY2FsZXM6OmNvbW1hKQoKZ3JpZEV4dHJhOjpncmlkLmFycmFuZ2UoYTEsIGEyLCBucm93ID0gMSkKYGBgCgo6Ojogey5hbGVydCAuYWxlcnQtaW5mb30KPHN0cm9uZz5ZT1VSIFRVUk4hPC9zdHJvbmc+CgpXaGF0IGRvIHlvdSBvYnNlcnZlIGluIHRoZXNlIHBsb3RzPyBEbyBhbnkgYXNzdW1wdGlvbnMgYXBwZWFyIHZpb2xhdGVkPwo6OjoKCiMjIyBXYWxsZXllIGRhdGEKCkxldCdzIGxvb2sgYXQgYW5vdGhlciBwbG90LiBUaGlzIGlzIGEgbmV3IGRhdGFzZXQgdGhhdCBoYXMgdGhlIGFnZSBhbmQgbGVuZ3RoIG9mIHdhbGxleWUgKGEgdHlwZSBvZiBmaXNoKSwgZnJvbSB0aGUgYGFscjRgIHBhY2thZ2UuCgpgYGB7cn0KZ2dwbG90KHdhbGxleWUpICsgCiAgZ2VvbV9qaXR0ZXIoYWVzKHggPSBhZ2UsIHkgPSBsZW5ndGgpKSArCiAgdGhlbWVfbWluaW1hbCgpCmBgYAoKOjo6IHsuYWxlcnQgLmFsZXJ0LWluZm99CjxzdHJvbmc+WU9VUiBUVVJOITwvc3Ryb25nPgoKMS4gIEZpdCBhIG1vZGVsIHRoYXQgdXNlcyBgYWdlYCB0byBleHBsYWluIGBsZW5ndGhgLgoyLiAgTG9vayBhdCB0aGUgMiByZXNpZHVhbCBwbG90cyB3ZSBkaXNjdXNzZWQgYW5kIGFzc2VzcyB0aGVtLgo6OjoKCiMgQ29ycmVjdGluZyBtb2RlbCBhc3N1bXB0aW9ucyB3aXRoIHRyYW5zZm9ybWF0aW9ucwoKVGhlcmUgYXJlIG1hbnkgc29waGlzdGljYXRlZCBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgdG8gZml4IHByb2JsZW1zIHdpdGggbGluZWFyIG1vZGVsIGFzc3VtcHRpb25zLiBCdXQgYSBmYWlybHkgc2ltcGxlIHNvbHV0aW9uIHRoYXQgb2Z0ZW4gd29ya3Mgd2VsbCBpcyB0byB0cmFuc2Zvcm0gdmFyaWFibGVzLiBXZSB3aWxsIGRpc2N1c3MgdHdvIGRpZmZlcmVudCB0cmFuc2Zvcm1hdGlvbnMgYW5kIGFwcGx5IHRoZW0gdG8gdGhlIHR3byBleGFtcGxlcyBmcm9tIGFib3ZlLgoKIyMgTG9nYXJpdGhtaWMgdHJhbnNmb3JtYXRpb24KCldoZW4gdmFyaWFibGVzIHJhbmdlIGFjcm9zcyBtb3JlIHRoYW4gb25lIG9yZGVyIG9mIG1hZ25pdHVkZSBpbiB0aGVpciB2YWx1ZXMgKGllLiB0aGV5IGhhdmUgdmFsdWVzIGluIHRoZSAxLDAwMCdzIEFORCAxMCwwMDAncyBvciAxMDAsMDAwJ3MgQU5EIHRoZSAxLDAwMCwwMDAncyksIGxvZyB0cmFuc2Zvcm1pbmcgY2FuIG9mdGVuIGhlbHAgZml4IG5vbi1jb25zdGFudCB2YXJpYW5jZS4gTGV0J3MgbG9vayBhdCB0aGUgZm9sbG93aW5nIHNjYXR0ZXJwbG90IG1hdHJpeC4gSSBkaWQgYSBsb2cgYmFzZSAyIHRyYW5zZm9ybWF0aW9uIG9mIGJvdGggKnByaWNlKiBhbmQgKnNxZnRfbGl2aW5nMTUqLiBXaGF0IGRvIHlvdSBub3RpY2U/CgpgYGB7ciwgbWVzc2FnZT1GQUxTRX0Ka2NfaG91c2VfZGF0YTIgJT4lIAogIG11dGF0ZShsb2cyX3ByaWNlID0gbG9nMihwcmljZSksCiAgICAgICAgIGxvZzJfc3FmdCA9IGxvZzIoc3FmdF9saXZpbmcxNSkpICU+JSAKICBzZWxlY3QoYWdlLCBzcWZ0X2xpdmluZzE1LCBsb2cyX3NxZnQsIGxvZzJfcHJpY2UpICU+JSAKICBnZ3BhaXJzKCkKYGBgCgpOb3csIGxldCdzIGZpdCBhIG1vZGVsIHRoYXQgdXNlcyAqbG9nMl9wcmljZSogYXMgdGhlIHJlc3BvbnNlIGFuZCAqYWdlKiBhbmQgKmxvZzJfc3FmdCogYXMgZXhwbGFuYXRvcnkgdmFyaWFibGVzLiBGaXJzdCwgSSBuZWVkIHRvIGNyZWF0ZSBhIG5ldyBkYXRhc2V0IHdpdGggdGhlc2UgdmFyaWFibGVzLgoKYGBge3J9CmtjX2hvdXNlX2xvZyA8LSBrY19ob3VzZV9kYXRhMiAlPiUgCiAgbXV0YXRlKGxvZzJfcHJpY2UgPSBsb2cyKHByaWNlKSwKICAgICAgICAgbG9nMl9zcWZ0ID0gbG9nMihzcWZ0X2xpdmluZzE1KSkKa2NfbG9nIDwtIGxtKGxvZzJfcHJpY2UgfiBhZ2UgKyBsb2cyX3NxZnQsCiAgICAgICAgICAgICBkYXRhID0ga2NfaG91c2VfbG9nKQpnZXRfcmVncmVzc2lvbl90YWJsZShrY19sb2cpCmBgYAoKOjo6IHsuYWxlcnQgLmFsZXJ0LWluZm99CjxzdHJvbmc+WU9VUiBUVVJOITwvc3Ryb25nPgoKVXNlIHRoZSByZXNpZHVhbCBwbG90cyB0byBjaGVjayB0aGUgbW9kZWwgYXNzdW1wdGlvbnMuIEhvdyBkbyB0aGV5IGxvb2sgbm93Pwo6OjoKCiMjIEFkZGluZyBhIHBvbHlub21pYWwgdGVybSB0byB0aGUgbW9kZWwKCkZvciB0aGUgd2FsbGV5ZSBkYXRhLCB0aGUgYmlnZ2VzdCBwcm9ibGVtIHNlZW1lZCB0byBiZSB0aGF0IHRoZSBtZWFuIHdhcyBub3QgemVybyB0aHJvdWdob3V0IHRoZSByYW5nZSBvZiBmaXR0ZWQgdmFsdWVzLiBUaGlzIGlzIGJlY2F1c2UgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIGBhZ2VgIGFuZCBgbGVuZ3RoYCB3YXMgbm90IGxpbmVhciB0byBiZWdpbiB3aXRoLgoKV2UgY2FuIHRyeSB0byBhZGRyZXNzIHRoaXMgYnkgYWRkaW5nIGEgcXVhZHJhdGljIChvciBoaWdoZXIgb3JkZXIgcG9seW5vbWlhbCkgdGVybSB0byBvdXIgbW9kZWwuIEkgaGF2ZSBkb25lIHRoYXQgYmVsb3cuIE5vdGljZSB0aGF0IHlvdSBuZWVkIHRvIGVuY2xvc2UgdGhlIHBvbHlub21pYWwgdGVybSBpbiBgSSgpYC4KCmBgYHtyfQp3YWxsZXllX3F1YWRyYXRpYyA8LSAgbG0obGVuZ3RoIH4gYWdlICsgSShhZ2VeMiksIAogICAgICAgICAgICAgICAgICAgICAgICAgZGF0YT13YWxsZXllKQp0aWR5KHdhbGxleWVfcXVhZHJhdGljKQpgYGAKCjo6OiB7LmFsZXJ0IC5hbGVydC1pbmZvfQo8c3Ryb25nPllPVVIgVFVSTiE8L3N0cm9uZz4KCjEuICBQbG90IHRoaXMgbW9kZWwgb24gdGhlIHNjYXR0ZXJwbG90IG9mIGBhZ2VgIHZlcnN1cyBgbGVuZ3RoYC4KMi4gIENyZWF0ZSB0aGUgdHdvIHJlc2lkdWFsIHBsb3RzIGFuZCBldmFsdWF0ZSB0aGVtLgozLiAgVHJ5IGludGVycHJldGluZyB0aGUgY29lZmZpY2llbnRzIG9mIHRoZSBtb2RlbC4KOjo6CgojIyBJbnRlcnByZXRpbmcgYSBtb2RlbCBhZnRlciB0cmFuc2Zvcm1pbmcgdmFyaWFibGVzCgpJbnRlcnByZXRhdGlvbiBjYW4gZ2V0IGEgYml0IHRyaWNreSBhZnRlciB0cmFuc2Zvcm1pbmcgdmFyaWFibGVzLiBXZSB1c3VhbGx5IHN0aWxsIHByZWZlciB0byBpbnRlcnByZXQgdGhlIG1vZGVsIGluIHRoZSBvcmlnaW5hbCB1bml0cy4gV2hlbiBkb2luZyBsb2cgdHJhbnNmb3JtYXRpb25zLCBpdCB3aWxsIGJlIGhlbHBmdWwgdG8gcmVtZW1iZXIgc29tZSBydWxlcyBvZiBsb2dzIG9mIGV4cG9uZW50cyAoc2VlIHRoZSBoZWxwIHNoZWV0IG9uIHRoZSBtb29kbGUgcGFnZSkuIEJlbG93IHlvdSB3aWxsIHdvcmsgdGhyb3VnaCBhbiBleGFtcGxlIHVzaW5nIHRoZSBmb2xsb3dpbmcgbW9kZWwuCgpgYGB7cn0KdGlkeShrY19sb2cpCmBgYAoKOjo6IHsuYWxlcnQgLmFsZXJ0LWluZm99CjxzdHJvbmc+WU9VUiBUVVJOITwvc3Ryb25nPgoKMS4gIFdyaXRlIGRvd24gdGhlIG1vZGVsIGVxdWF0aW9uIGluIHRlcm1zIG9mIGBwcmljZWAuIFRoYXQgaXMsIHJhdGhlciB0aGFuIGhhdmluZyBgbG9nMl9wcmljZWAgb24gdGhlIGxlZnQgaGFuZCBzaWRlIG9mIHRoZSBlcXVhdGlvbiwgYHByaWNlYCBpcyBvbiB0aGUgbGVmdCBoYW5kIHNpZGUuCgoyLiAgVXNpbmcgdGhlIGVxdWF0aW9uIGZyb20gdGhlIHByZXZpb3VzIHN0ZXAsIGhvdyBkb2VzIGFuIGluY3JlYXNlIG9mIDEgeWVhciBpbiBhZ2Ugb2YgYSBob21lIHR5cGljYWxseSBhZmZlY3QgdGhlIHByaWNlICh3aXRoIGFsbCBvdGhlciB2YXJpYWJsZXMgaW4gdGhlIG1vZGVsIGhlbGQgZml4ZWQpPyBJdCBtaWdodCBiZSBoZWxwZnVsIHRvIHRyeSBhbiBleGFtcGxlLgoKMy4gIEhvdyBkb2VzIGRvdWJsaW5nIHNxdWFyZSBmb290YWdlIHR5cGljYWxseSBhZmZlY3QgdGhlIHByaWNlICh3aXRoIGFsbCBvdGhlciB2YXJpYWJsZXMgaW4gdGhlIG1vZGVsIGhlbGQgZml4ZWQpPyBUaGVyZSBpcyBhIHJlYXNvbiBJJ20gYXNraW5nIHRoaXMgcXVlc3Rpb24gaW4gdGhpcyB3YXkgLi4uCgo0LiAgTm93IGJ1aWxkIGEgbW9yZSBjb21wbGV4IG1vZGVsIHdpdGggKmxvZzJfcHJpY2UqIGFzIHRoZSByZXNwb25zZS4gQWRkIGEgY2F0ZWdvcmljYWwgdmFyaWFibGUgYW5kL29yIGludGVyYWN0aW9uIGVmZmVjdC4gSG93IGRvIHlvdSBpbnRlcnByZXQgdGhlIGNvZWZmaWNpZW50cyBvZiBhIGNhdGVnb3JpY2FsIHZhcmlhYmxlPyBBbiBpbnRlcmFjdGlvbiBlZmZlY3Q/Cjo6Ogo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("06_assumptions_transformations.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
